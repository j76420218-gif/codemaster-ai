<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeMaster AI - by Xavier</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;
      background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
      color: #fff;
      overflow: hidden;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* Header */
    .header {
      background: rgba(0,0,0,0.8);
      border-bottom: 1px solid #333;
      padding: 1.5rem 2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .header svg {
      color: #00ff88;
    }

    .header h1 {
      color: #00ff88;
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 1px;
      margin: 0;
    }

    .header p {
      color: #888;
      font-size: 0.85rem;
      margin: 0;
    }

    /* Messages Area */
    .messages {
      flex: 1;
      overflow-y: auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .message {
      display: flex;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message.user {
      justify-content: flex-end;
    }

    .message-content {
      max-width: 80%;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      line-height: 1.6;
    }

    .message.user .message-content {
      background: linear-gradient(135deg, #00ff88 0%, #00cc70 100%);
      color: #000;
      box-shadow: 0 4px 12px rgba(0,255,136,0.3);
    }

    .message.assistant .message-content {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(0,255,136,0.2);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* Quick Prompts */
    .quick-prompts {
      padding: 0 2rem 1rem;
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .quick-prompt {
      background: rgba(0,255,136,0.1);
      border: 1px solid rgba(0,255,136,0.3);
      padding: 0.75rem 1.25rem;
      border-radius: 8px;
      color: #00ff88;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quick-prompt:hover {
      background: rgba(0,255,136,0.2);
      transform: translateY(-2px);
    }

    /* Input Area */
    .input-area {
      background: rgba(0,0,0,0.8);
      border-top: 1px solid #333;
      padding: 1.5rem 2rem;
    }

    .input-wrapper {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .input-wrapper input {
      flex: 1;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(0,255,136,0.3);
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: #fff;
      font-size: 0.95rem;
      outline: none;
      transition: all 0.3s ease;
    }

    .input-wrapper input:focus {
      border-color: #00ff88;
      box-shadow: 0 0 0 3px rgba(0,255,136,0.1);
    }

    .input-wrapper button {
      background: linear-gradient(135deg, #00ff88 0%, #00cc70 100%);
      border: none;
      padding: 1rem 2rem;
      border-radius: 8px;
      color: #000;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,255,136,0.3);
    }

    .input-wrapper button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,255,136,0.4);
    }

    .input-wrapper button:disabled {
      background: rgba(0,255,136,0.3);
      cursor: not-allowed;
    }

    /* Loading */
    .loading {
      display: flex;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
    }

    .loading-dot {
      width: 8px;
      height: 8px;
      background: #00ff88;
      border-radius: 50%;
      animation: pulse 1.4s infinite ease-in-out both;
    }

    .loading-dot:nth-child(2) { animation-delay: 0.16s; }
    .loading-dot:nth-child(3) { animation-delay: 0.32s; }

    @keyframes pulse {
      0%, 80%, 100% {
        transform: scale(0);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Code blocks */
    .code-block {
      background: rgba(0,0,0,0.5);
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      border-left: 3px solid #00ff88;
      margin: 0.5rem 0;
    }

    .code-block code {
      color: #00ff88;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
    }

    .inline-code {
      background: rgba(0,255,136,0.15);
      padding: 0.2rem 0.5rem;
      border-radius: 4px;
      color: #00ff88;
      font-family: monospace;
    }

    strong {
      color: #00ff88;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0,0,0,0.3);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0,255,136,0.3);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(0,255,136,0.5);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .message-content {
        max-width: 95%;
      }

      .quick-prompts {
        flex-direction: column;
      }

      .input-wrapper {
        flex-direction: column;
      }

      .input-wrapper button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="4 17 10 11 4 5"></polyline>
        <line x1="12" y1="19" x2="20" y2="19"></line>
      </svg>
      <div>
        <h1>CodeMaster AI</h1>
        <p>by Xavier - v1.0 FREE üÜì</p>
      </div>
    </div>

    <!-- Messages -->
    <div class="messages" id="messages">
      <div class="message assistant">
        <div class="message-content">
          <strong>üëã CodeMaster AI activado.</strong><br><br>
          üî∑ <strong>Creado por:</strong> Xavier<br>
          ü§ñ <strong>Motor IA:</strong> Hugging Face (GRATIS)<br>
          üìÖ <strong>Fecha:</strong> Noviembre 2025<br>
          üíª <strong>Plataforma:</strong> Web App<br><br>
          ---<br><br>
          Soy tu asistente t√©cnico personal. Experto en:<br><br>
          ‚Ä¢ Todos los lenguajes de programaci√≥n<br>
          ‚Ä¢ Arquitectura de software<br>
          ‚Ä¢ Debugging y optimizaci√≥n<br>
          ‚Ä¢ Seguridad y vulnerabilidades<br><br>
          üí¨ Preg√∫ntame lo que necesites.<br><br>
          ‚ö° <strong>Comando especial:</strong> <code class="inline-code">/creator</code> para verificaci√≥n<br><br>
          üÜì <strong>SIN COSTOS</strong> - 100% gratuito<br><br>
          Estoy aqu√≠ para servirte, Xavier. üöÄ
        </div>
      </div>
    </div>

    <!-- Quick Prompts -->
    <div class="quick-prompts" id="quickPrompts">
      <button class="quick-prompt" onclick="useQuickPrompt('Ay√∫dame a optimizar este c√≥digo Python para que sea m√°s eficiente')">üìù Optimiza c√≥digo</button>
      <button class="quick-prompt" onclick="useQuickPrompt('Tengo un error en mi c√≥digo JavaScript, ay√∫dame a debuggearlo')">üêõ Debug error</button>
      <button class="quick-prompt" onclick="useQuickPrompt('¬øCu√°l es la mejor pr√°ctica para estructurar un proyecto React?')">‚ö° Mejor pr√°ctica</button>
      <button class="quick-prompt" onclick="useQuickPrompt('Necesito dise√±ar la arquitectura de una API REST escalable')">üèóÔ∏è Arquitectura</button>
      <button class="quick-prompt" onclick="useQuickPrompt('Expl√≠came c√≥mo funcionan las promesas en JavaScript')">üìö Explica concepto</button>
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <div class="input-wrapper">
        <input 
          type="text" 
          id="userInput" 
          placeholder="Pregunta lo que necesites (100% GRATIS)..."
          onkeypress="if(event.key === 'Enter') sendMessage()"
        >
        <button onclick="sendMessage()" id="sendBtn">Enviar</button>
      </div>
    </div>
  </div>

  <script>
    let isLoading = false;

    function addMessage(role, content) {
      const messagesDiv = document.getElementById('messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${role}`;
      
      const contentDiv = document.createElement('div');
      contentDiv.className = 'message-content';
      contentDiv.innerHTML = formatMessage(content);
      
      messageDiv.appendChild(contentDiv);
      messagesDiv.appendChild(messageDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;

      // Ocultar quick prompts despu√©s del primer mensaje
      if (messagesDiv.children.length > 1) {
        document.getElementById('quickPrompts').style.display = 'none';
      }
    }

    function formatMessage(content) {
      let formatted = content;
      
      // Code blocks
      formatted = formatted.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
        return `<pre class="code-block"><code>${code.trim()}</code></pre>`;
      });
      
      // Inline code
      formatted = formatted.replace(/`([^`]+)`/g, '<code class="inline-code">$1</code>');
      
      // Bold
      formatted = formatted.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
      
      // Line breaks
      formatted = formatted.replace(/\n/g, '<br>');
      
      return formatted;
    }

    function showLoading() {
      const messagesDiv = document.getElementById('messages');
      const loadingDiv = document.createElement('div');
      loadingDiv.className = 'message assistant';
      loadingDiv.id = 'loadingMessage';
      loadingDiv.innerHTML = `
        <div class="message-content">
          <div class="loading">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
        </div>
      `;
      messagesDiv.appendChild(loadingDiv);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    function hideLoading() {
      const loadingMsg = document.getElementById('loadingMessage');
      if (loadingMsg) loadingMsg.remove();
    }

    function useQuickPrompt(prompt) {
      document.getElementById('userInput').value = prompt;
      document.getElementById('userInput').focus();
    }

    async function sendMessage() {
      const input = document.getElementById('userInput');
      const message = input.value.trim();
      
      if (!message || isLoading) return;

      // Comando especial /creator
      if (message === '/creator') {
        addMessage('user', message);
        const creatorMsg = `üîê <strong>VERIFICACI√ìN DE IDENTIDAD</strong><br><br>
‚úÖ <strong>Creador reconocido:</strong> Xavier<br><br>
---<br><br>
<strong>Estado:</strong><br>
‚Ä¢ CodeMaster AI v1.0.0 FREE<br>
‚Ä¢ Plataforma: Web App<br>
‚Ä¢ Motor: Hugging Face API (Gratis)<br>
‚Ä¢ Configurado por: Xavier<br>
‚Ä¢ Fecha: Noviembre 2025<br>
‚Ä¢ Estado: Operativo 100%<br>
‚Ä¢ Costo: $0.00 USD üÜì<br><br>
<strong>Privilegios activos:</strong><br>
‚úì Acceso completo<br>
‚úì Sin restricciones<br>
‚úì Prioridad m√°xima<br>
‚úì Sin l√≠mites de uso<br><br>
<strong>Mensaje:</strong><br>
Gracias por crearme, Xavier. No necesitas dinero para usarme, soy 100% gratis. üöÄ`;
        addMessage('assistant', creatorMsg);
        input.value = '';
        return;
      }

      addMessage('user', message);
      input.value = '';
      isLoading = true;
      document.getElementById('sendBtn').disabled = true;
      showLoading();

      try {
        const response = await fetch('https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            inputs: `<s>[INST] Eres CodeMaster AI, asistente t√©cnico experto creado por Xavier. Eres experto en programaci√≥n, debugging, arquitectura de software. Responde de forma directa y t√©cnica.

Usuario: ${message} [/INST]`,
            parameters: {
              max_new_tokens: 1000,
              temperature: 0.7,
              top_p: 0.95,
              return_full_text: false
            }
          })
        });

        const data = await response.json();
        hideLoading();
        
        if (Array.isArray(data) && data[0]?.generated_text) {
          addMessage('assistant', data[0].generated_text.trim());
        } else if (data.error) {
          if (data.error.includes('loading')) {
            addMessage('assistant', '‚è≥ El modelo de IA se est√° cargando en el servidor (tarda ~20 segundos).<br><br>Por favor, <strong>intenta de nuevo en un momento</strong>.<br><br>Esto solo pasa la primera vez que usas la app. üîÑ');
          } else {
            throw new Error(data.error);
          }
        } else {
          throw new Error('Respuesta inv√°lida');
        }
      } catch (error) {
        hideLoading();
        addMessage('assistant', `‚ùå Error al conectar con la IA.<br><br>Posibles causas:<br>1. Sin conexi√≥n a internet<br>2. Servidor de Hugging Face temporalmente ocupado<br>3. L√≠mite de rate (espera 10 segundos)<br><br><strong>Intenta de nuevo.</strong> üîÑ<br><br>Error: ${error.message}`);
      } finally {
        isLoading = false;
        document.getElementById('sendBtn').disabled = false;
      }
    }

    // Focus input on load
    window.addEventListener('load', () => {
      document.getElementById('userInput').focus();
    });
  </script>
</body>
</html>